# Маскировка номеров банковских карт и счетов

**Простая и удобная библиотека для безопасной маскировки номеров банковских карт и счетов в Python.**

Этот проект поможет вам скрыть конфиденциальную информацию о банковских картах и счетах, оставив видимыми только необходимые цифры для идентификации.

## Что умеет программа

### Маскировка банковских карт
- **Скрывает средние цифры** номера карты, оставляя видимыми первые 6 и последние 4 цифры
- **Поддерживает все типы карт**: Visa, Mastercard, Maestro, American Express и другие
- **Работает с номерами** от 13 до 19 цифр

**Пример:** `1234567890123456` → `1234 56** **** 3456`

### Маскировка банковских счетов
- **Показывает только последние 4 цифры** номера счета
- **Скрывает все остальные** цифры за символами `**`

**Пример:** `73654108430135874305` → `**4305`

### Форматирование дат
- **Преобразует даты** из технического формата в читаемый вид
- **Поддерживает ISO формат** с микросекундами

**Пример:** `2024-03-11T02:26:18.671407` → `11.03.2024`

### Универсальная обработка
- **Автоматически определяет** тип данных (карта или счет)
- **Работает со строками** содержащими название типа и номер
- **Обрабатывает ошибки** с понятными сообщениями

## Быстрый старт

### Требования
- **Python 3.8+** (рекомендуется Python 3.9+)

### Установка

```bash
# 1. Скачайте проект
git clone <ссылка-на-репозиторий>
cd PPVijetBankCard

# 2. Создайте виртуальное окружение
python -m venv venv

# 3. Активируйте окружение
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# 4. Установите зависимости
pip install -r requirements.txt
```

### Демонстрация
```bash
# Запустите демо-программу
python main.py
```

## Примеры использования

### Базовые функции

```python
from src.masks import get_mask_card_number, get_mask_account

# Маскировка номера карты
card_number = 1234567890123456
masked_card = get_mask_card_number(card_number)
print(masked_card)  # Результат: 1234 56** **** 3456

# Маскировка номера счета
account_number = 123456789
masked_account = get_mask_account(account_number)
print(masked_account)  # Результат: **6789
```

### Умные функции

```python
from src.widget import mask_account_card, get_date

# Автоматическая маскировка карт и счетов
card_string = "Visa Platinum 7000792289606361"
masked_card = mask_account_card(card_string)
print(masked_card)  # Результат: Visa Platinum 7000 79** **** 6361

account_string = "Счет 73654108430135874305"
masked_account = mask_account_card(account_string)
print(masked_account)  # Результат: Счет **4305

# Форматирование дат
date_string = "2024-03-11T02:26:18.671407"
formatted_date = get_date(date_string)
print(formatted_date)  # Результат: 11.03.2024
```

## Подробные примеры

### Функция `mask_account_card`

**Автоматически определяет тип данных и применяет нужную маскировку:**

```python
# Различные типы банковских карт
mask_account_card("Visa Platinum 7000792289606361")
# → "Visa Platinum 7000 79** **** 6361"

mask_account_card("Maestro 7000792289606361")
# → "Maestro 7000 79** **** 6361"

mask_account_card("Mastercard 5555555555554444")
# → "Mastercard 5555 55** **** 4444"

# Банковские счета
mask_account_card("Счет 73654108430135874305")
# → "Счет **4305"

mask_account_card("Счет 1234 5678 9012 3456")
# → "Счет **3456"
```

### Функция `get_date`

**Преобразует технические даты в читаемый формат:**

```python
# Различные форматы дат
get_date("2024-03-11T02:26:18.671407")
# → "11.03.2024"

get_date("2023-12-25T15:30:45.123456")
# → "25.12.2023"

get_date("2024-01-01T00:00:00")
# → "01.01.2024"

get_date("2024-02-29T12:00:00.000000")
# → "29.02.2024" (високосный год)
```

## Для разработчиков

### Инструменты качества кода

Проект использует современные инструменты для обеспечения качества:

- **Black** - автоматическое форматирование кода
- **Flake8** - проверка стиля и ошибок
- **isort** - сортировка импортов
- **mypy** - статическая проверка типов

### Команды для разработки

```bash
# Форматирование кода
black .

# Проверка стиля
flake8 .

# Сортировка импортов
isort .

# Проверка типов
mypy .
```

### Тестирование

Проект имеет комплексный набор тестов для проверки корректности работы всех функций:

```bash
# Запуск всех тестов
pytest

# Запуск тестов с выводом покрытия
pytest --cov=src

# Запуск конкретного тестового файла
pytest tests/test_masks.py

# Запуск тестов с генерацией HTML-отчета о покрытии
coverage run -m pytest
coverage html
```

#### Структура тестов

- `tests/test_masks.py` - тесты функций маскировки карт и счетов
- `tests/test_processing.py` - тесты функций обработки транзакций
- `tests/test_widget.py` - тесты форматирования данных и дат

#### Покрытие кода

После запуска тестов с покрытием вы можете найти подробный HTML-отчет в папке `htmlcov`. Откройте файл `htmlcov/index.html` в браузере для просмотра детальной информации о покрытии кода тестами.

Текущее покрытие тестами:
- `src/masks.py`: 100%
- `src/processing.py`: 100%
- `src/widget.py`: 100%

### Структура проекта

```
PPVijetBankCard/
├── src/
│   ├── __init__.py
│   ├── masks.py          # Базовые функции маскировки
│   ├── widget.py         # Расширенные функции
│   └── processing.py     # Функции обработки данных
├── tests/
│   ├── __init__.py
│   ├── test_masks.py     # Тесты функций маскировки
│   ├── test_processing.py # Тесты функций обработки
│   └── test_widget.py    # Тесты форматирования данных
├── htmlcov/              # Отчет о покрытии кода тестами
│   ├── index.html        # Главный файл отчета
│   └── ...               # Другие файлы отчета
├── main.py               # Демонстрация всех функций
├── requirements.txt      # Зависимости
├── pyproject.toml        # Конфигурация проекта
└── README.md             # Документация
```

### Описание модулей

| Файл | Описание |
|------|----------|
| `src/masks.py` | Базовые функции маскировки карт и счетов |
| `src/widget.py` | Умные функции для работы со строками и датами |
| `src/processing.py` | Функции для обработки и фильтрации транзакций |
| `main.py` | Демонстрационная программа |

## Обработка транзакций

Модуль `processing.py` помогает работать с финансовыми транзакциями: фильтровать, сортировать и форматировать их.

### Фильтрация и сортировка

```python
from src.processing import filter_by_state, sort_by_date

# Фильтрация: оставляем только выполненные транзакции
executed_transactions = filter_by_state(transactions, "EXECUTED")

# Сортировка: располагаем транзакции по дате (от новых к старым)
sorted_transactions = sort_by_date(transactions)

# Сортировка от старых к новым
sorted_asc = sort_by_date(transactions, reverse_order=False)
```

### Комплексная обработка

```python
from src.processing import format_transactions, mask_transaction_details, get_formatted_date

# Полная обработка: фильтрация + сортировка + маскирование данных
formatted = format_transactions(transactions)

# Маскирование номеров карт и счетов в одной транзакции
masked = mask_transaction_details(transaction)

# Преобразование даты в привычный формат
date_formatted = get_formatted_date(transaction)
```

**Пример результата:**
- До: `"Visa Platinum 7000792289606361"` → После: `"Visa Platinum 7000 79** **** 6361"`
- До: `"2024-03-11T02:26:18.671407"` → После: `"11.03.2024"`

## Вклад в проект

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле LICENSE.

### Краткое описание лицензии

Лицензия MIT позволяет:

- ✅ **Свободно использовать** - в личных, коммерческих и образовательных целях
- ✅ **Модифицировать** - изменять код под свои нужды
- ✅ **Распространять** - копировать и распространять оригинальный или измененный код

Единственное требование:

- 📄 **Сохранять уведомление об авторских правах** - во всех копиях или значительных частях программного обеспечения

### Использование в коммерческих продуктах

Вы можете свободно использовать этот код в коммерческих проектах без каких-либо ограничений или отчислений.
